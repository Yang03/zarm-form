(self.webpackChunkzarm_form=self.webpackChunkzarm_form||[]).push([[179],{"./.storybook/generated-stories-entry.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync ^\\.\\/(?:(?%21\\.)(?=.)[^/]*?\\.(js|mdx|jsx))$")],module,!1)},"./.storybook/preview.js-generated-config-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject);var client_api=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/@storybook/client-api/dist/esm/client_api.js"),types=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/@storybook/client-api/dist/esm/types.js"),esm=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/@storybook/client-logger/dist/esm/index.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),client=__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-info/dist/index.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function preview_js_generated_config_entry_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(0,client.addDecorator)(dist.cw),(0,client.addParameters)({info:{inline:!0,source:!1,header:!1,styles:function styles(stylesheet){return function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},stylesheet)}}}),Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return(0,client_api.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,client_api.HZ)(loader,!1)}));case"parameters":return(0,client_api.h1)(function preview_js_generated_config_entry_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?preview_js_generated_config_entry_ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):preview_js_generated_config_entry_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,client_api.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,client_api._C)(enhancer)}));case"render":return(0,types.setGlobalRender)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,client_api.h1)(v,!1);default:return console.log(key+" was not supported :( !")}}))},"./.storybook/storybook-init-framework-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./stories/demo.jsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/zarm/lib/button/style/index.js");var lib_button=__webpack_require__("./node_modules/zarm/lib/button/index.js"),input=(__webpack_require__("./node_modules/zarm/lib/input/style/index.js"),__webpack_require__("./node_modules/zarm/lib/input/index.js")),react=__webpack_require__("./node_modules/react/index.js"),client=__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dist_web=__webpack_require__("./node_modules/async-validator/dist-web/index.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var Form=react.forwardRef((function(props,ref){var _useState=(0,react.useState)({}),_useState2=(0,slicedToArray.Z)(_useState,2),values=_useState2[0],setValues=_useState2[1],formRules=(0,react.useRef)({});(0,react.useImperativeHandle)(ref,(function(){return{validator:new dist_web.Z(formRules.current),values:values}}));var children=props.children,className=props.className,errors=props.errors,items=react.Children.map(children,(function(element,index){var _rules$items,_rules$items2,_formRules$current,_React$cloneElement;if("zarm-form-item"!==element.type.displayName)return react.cloneElement(element);var _element$props=element.props,name=_element$props.name,label=_element$props.label,_element$props$rules=_element$props.rules,rules=void 0===_element$props$rules?[]:_element$props$rules,error=element.props.error;error=error||(null==errors?void 0:errors[name]);var _formRules$name,_formRules$name$curre,blurRule=null==rules||null===(_rules$items=rules.items)||void 0===_rules$items?void 0:_rules$items.filter((function(item){return"blur"===item.trigger})),changeRule=null===(_rules$items2=rules.items)||void 0===_rules$items2?void 0:_rules$items2.filter((function(item){return"change"===item.trigger}));null!==(_formRules$current=formRules.current)&&void 0!==_formRules$current&&_formRules$current[name]?formRules.current[name]=null===(_formRules$name=formRules[name])||void 0===_formRules$name||null===(_formRules$name$curre=_formRules$name.current)||void 0===_formRules$name$curre?void 0:_formRules$name$curre.concat(null==rules?void 0:rules.items):formRules.current[name]=null==rules?void 0:rules.items;return react.cloneElement(element,(_React$cloneElement={error:error,name:name,label:label},(0,defineProperty.Z)(_React$cloneElement,"error",error),(0,defineProperty.Z)(_React$cloneElement,"changelistener",(function changelistener(value){setValues(_objectSpread(_objectSpread({},values),{},(0,defineProperty.Z)({},name,value))),changeRule.length>0&&rules.callback(changeRule,name,value)})),(0,defineProperty.Z)(_React$cloneElement,"blurlistener",(function blurlistener(value){blurRule.length>0&&rules.callback(blurRule,name,value)})),_React$cloneElement))})),cls=classnames_default()("zarm-form",className);return react.createElement("div",{className:cls},items)}));Form.__docgenInfo={description:"",methods:[],displayName:"Form"};var src_Form=Form;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Form.js"]={name:"Form",docgenInfo:Form.__docgenInfo,path:"src/Form.js"});__webpack_require__("./node_modules/zarm/lib/cell/style/index.js");var cell=__webpack_require__("./node_modules/zarm/lib/cell/index.js"),message=(__webpack_require__("./node_modules/zarm/lib/message/style/index.js"),__webpack_require__("./node_modules/zarm/lib/message/index.js")),icon=(__webpack_require__("./node_modules/zarm/lib/icon/style/index.js"),__webpack_require__("./node_modules/zarm/lib/icon/index.js")),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_excluded=["onChange","onBlur","onOk"];function FormItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function FormItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?FormItem_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FormItem_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function FormItem(props){var children=props.children,label=props.label,changelistener=props.changelistener,blurlistener=props.blurlistener,className=props.className,error=props.error,hasArrow=props.hasArrow,showError=props.showError,_children$props=children.props,onChange=_children$props.onChange,onBlur=_children$props.onBlur,onOk=_children$props.onOk,others=(0,objectWithoutProperties.Z)(_children$props,_excluded),change="function"==typeof onOk?"onOk":"onChange",events=(0,defineProperty.Z)({},change,(function(value){"function"==typeof onChange&&onChange(value),"function"==typeof onOk&&onOk(value),changelistener(value)}));"onChange"===change&&(events.onBlur=function(value){"function"==typeof onChange&&onBlur(value),blurlistener(value)});var child=react.cloneElement(children,FormItem_objectSpread(FormItem_objectSpread({},others),events)),cls=classnames_default()("zarm-form__item",className),help="";return error&&(react.isValidElement(error)?help=error:"string"==typeof error&&(help=react.createElement(message.Z,{theme:"danger"},react.createElement(icon.Z,{type:"wrong-round",size:"sm"}),react.createElement("div",null,error)))),react.createElement(cell.Z,{title:label,className:cls,hasArrow:hasArrow,help:showError?help:""},child)}FormItem.displayName="zarm-form-item",FormItem.__docgenInfo={description:"",methods:[],displayName:"zarm-form-item"};var src_FormItem=FormItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/FormItem.js"]={name:"FormItem",docgenInfo:FormItem.__docgenInfo,path:"src/FormItem.js"});var lodash_omit=__webpack_require__("./node_modules/lodash.omit/index.js"),lodash_omit_default=__webpack_require__.n(lodash_omit);function useForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function useForm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?useForm_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var src_useForm=function useForm(ref){var _useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),errors=_useState2[0],setError=_useState2[1],submitFlag=!1;return{handleSubmit:function handleSubmit(callback){return function(){var _ref$current,_ref$current$validato,_ref$current2;submitFlag=!0,null==ref||null===(_ref$current=ref.current)||void 0===_ref$current||null===(_ref$current$validato=_ref$current.validator)||void 0===_ref$current$validato||_ref$current$validato.validate(null==ref||null===(_ref$current2=ref.current)||void 0===_ref$current2?void 0:_ref$current2.values).then((function(){var _ref$current3;setError(void 0),callback(null==ref||null===(_ref$current3=ref.current)||void 0===_ref$current3?void 0:_ref$current3.values)})).catch((function(_ref){var errors=_ref.errors;_ref.fields;setError(function formatErr(data){var obj={};return null==data||data.forEach((function(item){obj[item.field]=item.message})),obj}(errors)),callback(ref.current.values)}))}},register:function register(data){return{items:data,callback:function callback(relus,name,value){if(submitFlag)return!1;new dist_web.Z((0,defineProperty.Z)({},name,relus)).validate((0,defineProperty.Z)({},name,value)).then((function(){var temp=lodash_omit_default()(errors,[name]);setError(temp)})).catch((function(_ref2){var _err$,_err$2,err=_ref2.errors;_ref2.fields;setError(useForm_objectSpread(useForm_objectSpread({},errors),{},(0,defineProperty.Z)({},null==err||null===(_err$=err[0])||void 0===_err$?void 0:_err$.field,null==err||null===(_err$2=err[0])||void 0===_err$2?void 0:_err$2.message)))}))}}},errors:errors}};src_Form.Item=src_FormItem;var src=src_Form;function Demo(){var fromRef=(0,react.useRef)(),_useForm=src_useForm(fromRef),handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,register=_useForm.register;return react.createElement(src,{ref:fromRef,errors:errors},react.createElement(src.Item,{label:"name",name:"name",className:"customer-classname",showError:!0,rules:register([{required:!0,message:"Please input your name!",trigger:"blur"}])},react.createElement(input.Z,{name:"name",placeholder:"please input name"})),react.createElement(src.Item,{label:"age",name:"age",className:"customer-classname",showError:!0,rules:register([{required:!0,message:"Please input your age!",trigger:"blur"}])},react.createElement(input.Z,{name:"age",placeholder:"please input age"})),react.createElement(lib_button.Z,{onClick:handleSubmit((function submit(values){console.log(values)})),theme:"primary",ghost:!0,block:!0},"submit"))}module=__webpack_require__.hmd(module),(0,client.storiesOf)("form validate",module).add("validate",(function(){return react.createElement("div",{className:"story_wrapper"},react.createElement("h2",null,"how to use?"),react.createElement("h2",null,"example"),react.createElement("div",null,react.createElement(Demo,null)))}),{info:{text:'\n        代码示例：\n        ~~~js\n        import React, { useRef } from \'react\'\n        import { Input, Button } from \'zarm\'\n        import Form, { useForm } from \'zarm-form\'\n\n        function Demo() {\n          const fromRef = useRef();\n          const { handleSubmit, errors, register } = useForm(fromRef);\n          const submit = (values) => {\n            console.log(values, \'ffff\')\n          }\n          return <Form ref={fromRef} errors={errors}>\n            <Form.Item\n              label="name"\n              name="name"\n              className="customer-classname"\n              showError={true}\n              rules = {\n                register([{\n                  required: true,\n                  message: \'Please input your name!\',\n                  trigger: \'blur\'\n                }])\n              }>\n              <Input name="name" placeholder="please input name" />\n            </Form.Item>\n            <Form.Item\n              label="age"\n              name="age"\n              className="customer-classname"\n              showError={true}\n              rules = {\n                register([{\n                  required: true,\n                  message: \'Please input your age!\',\n                  trigger: \'blur\'\n                }])\n              }>\n              <Input name="age" placeholder="please input age" />\n            </Form.Item>\n            <Button onClick={handleSubmit(submit)} theme="primary" ghost>submit</Button>\n          </Form>\n        }\n        ~~~\n        ',TableComponent:function TableComponent(){return react.createElement("div",null)}}})},"./node_modules/nested-object-assign/lib sync recursive ^\\.\\/.*$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./nestedObjectAssign":"./node_modules/nested-object-assign/lib/nestedObjectAssign.js","./nestedObjectAssign.js":"./node_modules/nested-object-assign/lib/nestedObjectAssign.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./node_modules/nested-object-assign/lib sync recursive ^\\.\\/.*$"},"./stories sync ^\\.\\/(?:(?%21\\.)(?=.)[^/]*?\\.(js|mdx|jsx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./demo.jsx":"./stories/demo.jsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync ^\\.\\/(?:(?%21\\.)(?=.)[^/]*?\\.(js|mdx|jsx))$"},"?4f7e":function(){}},function(__webpack_require__){"use strict";var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[38],(function(){return __webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./.storybook/storybook-init-framework-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/generated-stories-entry.js")}));__webpack_require__.O()}]);
//# sourceMappingURL=main.15e16e14.iframe.bundle.js.map